doctype html
html
	head
		title #{title}
		// Initially created by Leonard Pauli, sep 2016
		
		//- Meta
		meta(charset="utf-8")
		meta(http-equiv='Content-Type' content='text/html; charset=utf-8')
		
		meta(name='viewport' content='width=device-width, initial-scale=1')
		meta(name='robots' content='index, follow')
		
		include meta-seo

		link(rel="shortcut icon" href="/favicon.ico" type="image/x-icon")
		link(rel="icon" href="/favicon.ico" type="image/x-icon")
		
		link(rel='stylesheet', href='/css/default.css')
		link(rel='stylesheet', href='/css/coat2.css')

		script.
			var dataPage = '#{dataPage}'
			var subpage = dataPage == 'ettutskott'? "#{utskott}":
				dataPage == 'enkommitte'? "#{kommitte}":
				undefined
			if (subpage) subpage = subpage.toLowerCase()

		if jsFilesToLoad
			each fileName in jsFilesToLoad
				script(src="/js/#{fileName}.js")

	- dataPage = dataPage || 'none'
	- var loggedInClass = user ? 'logged-in' : 'logged-out'
	body(data-page='#{dataPage}' class='#{loggedInClass}').loading

		//- Header
		.topheader
			//- include header
			.center-header
				.menubutton(onclick="hidemenu()")
				a.logga(href="/lolxdxd")
				a.vrotxt(href="/lolxdxd") VRO ELEVKÅR
				.links
					//- a.link(href="/mat") Matsedel
					//- a.link(href="/karen") Kåren
					//- a.link(href="/mat") Om
				a.log(href='/loginvro')
					h2.logtxt Logga in
		.phonelinks(data-index = 0)
		.mainhide(onclick="hidemenu()")

		//- .phonemenu(data-index=1)
		//- 	.phonelinks
		//- Main content
		- var links = [[{name:'Matsedel', link:'mat'}],[{name:'Kåren'}, {name:'utskott', link:'utskott'}, {name:'Styrelsen', link:'styrelsen'}, {name:'Kommittéer', link:'kommitte'}],[{name:'Om', link:'om'}]]
		script.
			var links = JSON.parse('!{JSON.stringify(links)}')

			for (i = 0; i < links.length; i++) {
				var temp;

				if (links[i][0]["link"] != undefined){
					temp = document.createElement('a')
					temp.innerText = links[i][0].name

					temp2 = document.createElement('a')
					temp2.innerText = links[i][0].name
				} else {
					temp = document.createElement('div')
					temp.innerText = links[i][0].name

					temp2 = document.createElement('div')
					temp2.innerText = links[i][0].name

					for (e = 1; e < links[i].length; e++) {
						sub = document.createElement('a')
						sub.className = "sublink"
						sub.innerText = links[i][e].name
						sub.href = "/" + links[i][e].link
						temp.appendChild(sub)

						sub2 = document.createElement('a')
						sub2.className = "sublink p-sublink"
						sub2.innerText = links[i][e].name
						sub2.href = "/" + links[i][e].link
						temp2.appendChild(sub2)
					}
				}

				temp.className = "link"
				temp.href = "/" + links[i][0].link

				temp2.className = "link p-link"
				temp2.href = "/" + links[i][0].link

				_(".links").appendChild(temp)
				_(".phonelinks").appendChild(temp2)
			}

		.extendHeader
			.shineheader

		.overlay
			.lightbox
				.button.prev
				.button.next

		.add-card.add-card-hidden
			.plus +
			.content
				input.imageinput(type="file" accept="image/*")
				label.image.add-image(for='bild')
					.imagetext Lägg till en bild
				.info
					.content
						.title.text-input(placeholder='rubrik' contentEditable="true")
						.text.text-input(placeholder='text' contentEditable="true")
						div.choice.chooseSlide.add-choice Är nu inte slide
						div.choice.publish.add-choice Publicera
			.close(onclick='closePanel()')
				.cross +

		.main-content
			//- include footer-made
			block mainContent
			//- if mainContent
			//- 	| !{mainContent}

		.creddiv(id='creddiv')
			p.credits By VRO-Web, part of Kommunikationsutskottet - Made primarily by Erik Enger Karlson, Jacob Tilly and Leonard Pauli
			//.shine

		- var links = [[{name:'Matsedel', link:'mat'}],[{name:'Kåren'}, {name:'utskott', link:'utskott'}, {name:'Styrelsen', link:'styrelsen'}, {name:'Kommittéer', link:'kommitte'}],[{name:'Om', link:'om'}]]

		if !config.isDev
			script.
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			
				ga('create', 'UA-85432260-1', 'auto');
				ga('send', 'pageview');

		script(src="https://www.gstatic.com/firebasejs/3.6.9/firebase.js")
		script(src="https://www.gstatic.com/firebasejs/3.6.9/firebase-app.js")
		script(src="https://www.gstatic.com/firebasejs/3.6.9/firebase-auth.js")
		script(src="https://www.gstatic.com/firebasejs/3.6.9/firebase-database.js")
		script(src="https://www.gstatic.com/firebasejs/3.6.9/firebase-messaging.js
		")

		script.
			// Initialize Firebase
			var config = {
				apiKey: "AIzaSyCsw0zGUHgtaA0K4oPkAshIutfdEpyn31c",
				authDomain: "vro-web.firebaseapp.com",
				databaseURL: "https://vro-web.firebaseio.com",
				storageBucket: "vro-web.appspot.com",
				messagingSenderId: "902824305582"
			};
			firebase.initializeApp(config);

		script(src='/js/default.js')
		script(src='/js/post-functions.js')